import { Injectable, inject } from '@angular/core';
import { BehaviorSubject, Observable, of } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { Coin } from '../models';
import { Utils } from '../utils';

@Injectable({
  providedIn: 'root',
})
export class CurrencyService {
  currency$ = new BehaviorSubject<Utils.Currency>('EUR');
  #http = inject(HttpClient);

  setValue(value: Utils.Currency): void {
    this.currency$.next(value);
  }

  queryCoins(currency: Utils.Currency) {
    return this.#http.get<Coin[]>(
      `https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency}&order=market_cap_desc&sparkline=false`
    );
  }

  // getTrendingCoins(currency: Currency) {
  //   return this.#http.get<Coin[]>(
  //     `https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency}&order=gecko_desc&per_page=10&page=1&sparkline=false&price_change_percentage=24h`
  //   );
  // }
  getTrendingCoins(currency: Utils.Currency) {
    return of([
      {
        id: 'bitcoin',
        symbol: 'btc',
        name: 'Bitcoin',
        image:
          'https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1696501400',
        current_price: 57231,
        market_cap: 1127539788127,
        market_cap_rank: 1,
        fully_diluted_valuation: 1202200015702,
        total_volume: 22532584247,
        high_24h: 58391,
        low_24h: 56609,
        price_change_24h: -690.460758463516,
        price_change_percentage_24h: -1.19207,
        market_cap_change_24h: -15753916506.868896,
        market_cap_change_percentage_24h: -1.37794,
        circulating_supply: 19695837.0,
        total_supply: 21000000.0,
        max_supply: 21000000.0,
        ath: 67405,
        ath_change_percentage: -15.04065,
        ath_date: '2024-03-14T07:10:36.635Z',
        atl: 51.3,
        atl_change_percentage: 111535.42073,
        atl_date: '2013-07-05T00:00:00.000Z',
        roi: null,
        last_updated: '2024-05-09T07:25:03.043Z',
        price_change_percentage_24h_in_currency: -1.1920670887751854,
      },
      {
        id: 'ethereum',
        symbol: 'eth',
        name: 'Ethereum',
        image:
          'https://assets.coingecko.com/coins/images/279/large/ethereum.png?1696501628',
        current_price: 2786.33,
        market_cap: 334743246980,
        market_cap_rank: 2,
        fully_diluted_valuation: 334743246980,
        total_volume: 10391557930,
        high_24h: 2818.28,
        low_24h: 2738.11,
        price_change_24h: -7.847984568851189,
        price_change_percentage_24h: -0.28087,
        market_cap_change_24h: -1627690543.5783691,
        market_cap_change_percentage_24h: -0.4839,
        circulating_supply: 120105242.695836,
        total_supply: 120105242.695836,
        max_supply: null,
        ath: 4228.93,
        ath_change_percentage: -34.10999,
        ath_date: '2021-12-01T08:38:24.623Z',
        atl: 0.381455,
        atl_change_percentage: 730376.60675,
        atl_date: '2015-10-20T00:00:00.000Z',
        roi: {
          times: 64.08124058937278,
          currency: 'btc',
          percentage: 6408.124058937278,
        },
        last_updated: '2024-05-09T07:24:43.266Z',
        price_change_percentage_24h_in_currency: -0.2808694368375506,
      },
      {
        id: 'ripple',
        symbol: 'xrp',
        name: 'XRP',
        image:
          'https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png?1696501442',
        current_price: 0.483408,
        market_cap: 26768044087,
        market_cap_rank: 7,
        fully_diluted_valuation: 48347420590,
        total_volume: 892335784,
        high_24h: 0.492427,
        low_24h: 0.479765,
        price_change_24h: 0.00112424,
        price_change_percentage_24h: 0.23311,
        market_cap_change_24h: 95647043,
        market_cap_change_percentage_24h: 0.3586,
        circulating_supply: 55359176420.0,
        total_supply: 99987633657.0,
        max_supply: 100000000000.0,
        ath: 2.82,
        ath_change_percentage: -82.84387,
        ath_date: '2018-01-07T00:00:00.000Z',
        atl: 0.00194619,
        atl_change_percentage: 24785.63676,
        atl_date: '2013-08-16T00:00:00.000Z',
        roi: null,
        last_updated: '2024-05-09T07:24:44.702Z',
        price_change_percentage_24h_in_currency: 0.23310723899157126,
      },
      {
        id: 'solana',
        symbol: 'sol',
        name: 'Solana',
        image:
          'https://assets.coingecko.com/coins/images/4128/large/solana.png?1696504756',
        current_price: 134.45,
        market_cap: 60247412819,
        market_cap_rank: 5,
        fully_diluted_valuation: 77374997102,
        total_volume: 2467251038,
        high_24h: 138.37,
        low_24h: 130.63,
        price_change_24h: -1.8767184484582913,
        price_change_percentage_24h: -1.37664,
        market_cap_change_24h: -921134740.8780365,
        market_cap_change_percentage_24h: -1.5059,
        circulating_supply: 448141804.902842,
        total_supply: 575542902.724452,
        max_supply: null,
        ath: 225.04,
        ath_change_percentage: -40.23557,
        ath_date: '2021-11-06T21:54:35.825Z',
        atl: 0.46316,
        atl_change_percentage: 28938.7827,
        atl_date: '2020-05-11T19:35:23.449Z',
        roi: null,
        last_updated: '2024-05-09T07:25:09.081Z',
        price_change_percentage_24h_in_currency: -1.3766361624320755,
      },
      {
        id: 'binancecoin',
        symbol: 'bnb',
        name: 'BNB',
        image:
          'https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png?1696501970',
        current_price: 558.73,
        market_cap: 86030933055,
        market_cap_rank: 4,
        fully_diluted_valuation: 86030933055,
        total_volume: 1181150673,
        high_24h: 559.75,
        low_24h: 538.03,
        price_change_24h: 17.64,
        price_change_percentage_24h: 3.25919,
        market_cap_change_24h: 2620930228,
        market_cap_change_percentage_24h: 3.14223,
        circulating_supply: 153856150.0,
        total_supply: 153856150.0,
        max_supply: 200000000.0,
        ath: 586.61,
        ath_change_percentage: -4.64918,
        ath_date: '2024-04-12T10:31:23.100Z',
        atl: 0.03359941,
        atl_change_percentage: 1664629.99008,
        atl_date: '2017-10-19T00:00:00.000Z',
        roi: null,
        last_updated: '2024-05-09T07:25:13.669Z',
        price_change_percentage_24h_in_currency: 3.2591888133376066,
      },
      {
        id: 'dogecoin',
        symbol: 'doge',
        name: 'Dogecoin',
        image:
          'https://assets.coingecko.com/coins/images/5/large/dogecoin.png?1696501409',
        current_price: 0.136568,
        market_cap: 19703701045,
        market_cap_rank: 9,
        fully_diluted_valuation: 19704414261,
        total_volume: 1022723931,
        high_24h: 0.140092,
        low_24h: 0.132254,
        price_change_24h: -0.001169849320890759,
        price_change_percentage_24h: -0.84933,
        market_cap_change_24h: -233547054.51609802,
        market_cap_change_percentage_24h: -1.17141,
        circulating_supply: 144210616383.705,
        total_supply: 144215836383.705,
        max_supply: null,
        ath: 0.601466,
        ath_change_percentage: -77.2702,
        ath_date: '2021-05-08T05:08:23.458Z',
        atl: 7.662e-5,
        atl_change_percentage: 178336.9822,
        atl_date: '2015-05-06T00:00:00.000Z',
        roi: null,
        last_updated: '2024-05-09T07:24:56.887Z',
        price_change_percentage_24h_in_currency: -0.8493332125245201,
      },
      {
        id: 'cardano',
        symbol: 'ada',
        name: 'Cardano',
        image:
          'https://assets.coingecko.com/coins/images/975/large/cardano.png?1696502090',
        current_price: 0.424393,
        market_cap: 15018437745,
        market_cap_rank: 11,
        fully_diluted_valuation: 19124388993,
        total_volume: 441892069,
        high_24h: 0.434456,
        low_24h: 0.406989,
        price_change_24h: 0.0160497,
        price_change_percentage_24h: 3.93044,
        market_cap_change_24h: 531623702,
        market_cap_change_percentage_24h: 3.66971,
        circulating_supply: 35338629578.9538,
        total_supply: 45000000000.0,
        max_supply: 45000000000.0,
        ath: 2.61,
        ath_change_percentage: -83.6961,
        ath_date: '2021-09-02T06:00:10.474Z',
        atl: 0.01722339,
        atl_change_percentage: 2367.49551,
        atl_date: '2020-03-13T02:22:55.044Z',
        roi: null,
        last_updated: '2024-05-09T07:24:47.595Z',
        price_change_percentage_24h_in_currency: 3.9304423485329205,
      },
      {
        id: 'chainlink',
        symbol: 'link',
        name: 'Chainlink',
        image:
          'https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png?1696502009',
        current_price: 13.04,
        market_cap: 7665248452,
        market_cap_rank: 18,
        fully_diluted_valuation: 13056121319,
        total_volume: 306031276,
        high_24h: 13.12,
        low_24h: 12.77,
        price_change_24h: 0.150138,
        price_change_percentage_24h: 1.16504,
        market_cap_change_24h: 67149139,
        market_cap_change_percentage_24h: 0.88376,
        circulating_supply: 587099971.3083414,
        total_supply: 1000000000.0,
        max_supply: 1000000000.0,
        ath: 43.32,
        ath_change_percentage: -69.85862,
        ath_date: '2021-05-10T00:13:57.214Z',
        atl: 0.125048,
        atl_change_percentage: 10340.92152,
        atl_date: '2017-11-29T00:00:00.000Z',
        roi: null,
        last_updated: '2024-05-09T07:25:08.452Z',
        price_change_percentage_24h_in_currency: 1.1650446082838561,
      },
      {
        id: 'polkadot',
        symbol: 'dot',
        name: 'Polkadot',
        image:
          'https://assets.coingecko.com/coins/images/12171/large/polkadot.png?1696512008',
        current_price: 6.48,
        market_cap: 8842152733,
        market_cap_rank: 16,
        fully_diluted_valuation: 9367605563,
        total_volume: 179311589,
        high_24h: 6.67,
        low_24h: 6.43,
        price_change_24h: -0.04651534725585904,
        price_change_percentage_24h: -0.7122,
        market_cap_change_24h: -65132717.14349556,
        market_cap_change_percentage_24h: -0.73123,
        circulating_supply: 1362017072.62983,
        total_supply: 1442956154.60717,
        max_supply: null,
        ath: 47.6,
        ath_change_percentage: -86.36081,
        ath_date: '2021-11-04T14:10:09.301Z',
        atl: 2.27,
        atl_change_percentage: 186.08451,
        atl_date: '2020-08-19T03:44:11.556Z',
        roi: null,
        last_updated: '2024-05-09T07:24:58.806Z',
        price_change_percentage_24h_in_currency: -0.7121984478192912,
      },
      {
        id: 'stellar',
        symbol: 'xlm',
        name: 'Stellar',
        image:
          'https://assets.coingecko.com/coins/images/100/large/Stellar_symbol_black_RGB.png?1696501482',
        current_price: 0.099759,
        market_cap: 2884695698,
        market_cap_rank: 38,
        fully_diluted_valuation: 4988044437,
        total_volume: 54599355,
        high_24h: 0.102044,
        low_24h: 0.09899,
        price_change_24h: -0.000190419800759886,
        price_change_percentage_24h: -0.19052,
        market_cap_change_24h: -7666174.474873066,
        market_cap_change_percentage_24h: -0.26505,
        circulating_supply: 28917132083.8967,
        total_supply: 50001786995.3935,
        max_supply: 50001786995.3935,
        ath: 0.729104,
        ath_change_percentage: -86.30273,
        ath_date: '2018-01-03T00:00:00.000Z',
        atl: 0.00043158,
        atl_change_percentage: 23039.97319,
        atl_date: '2015-03-05T00:00:00.000Z',
        roi: null,
        last_updated: '2024-05-09T07:24:53.908Z',
        price_change_percentage_24h_in_currency: -0.1905163754264873,
      },
    ]);
  }
}
